workflows:

  init:
    setup_queries:
      - load_products

  read:
    vus: 1
    queries:
      - name: fetch_products
        rate: 1/1s

activities:

  load_products:
    type: batch
    args:
      - type: gen
        value: uuid
      - type: gen
        value: product_name
      - type: float
        min: 1
        max: 100
    batch:
      total: 100
      size: 10
      table: product
      columns:
        - id
        - name
        - price
      returning:
        - id

  fetch_products:
    type: query
    args:
      - type: float
        min: 10
        max: 50
      - type: int
        min: 10
        max: 10
    query: |-
      SELECT id
      FROM product
      WHERE price <= $1
      LIMIT $2